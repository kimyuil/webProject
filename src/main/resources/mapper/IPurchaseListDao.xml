<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">


 <mapper namespace="com.spring.webProject.dao.IPurchaseListDao">

<!-- purId, userId, productId, pName, pColor, pImageRoute, 
purTime, state, uName, uAdress, uPhone, purMessage, pNum -->

 <insert id="purchaseItems">
 	insert into purchaselist 
 	(userId,uName,uAdress,uPhone,productId,pName,pColor,pImageRoute,pNum,purTime,purMessage,state) 
 	values 
 	(#{uId},#{uName},#{uAdress},#{uPhone},#{pId},#{pName},#{pColor},#{pImage},#{pNumof},now(),#{deliverMessage},#{state});
 </insert>

<select id="getUserPurchaseList" resultType="com.spring.webProject.dto.PurchaseListDto">
	select * from purchaselist where userId = #{uId}
</select>

<select id="getStateByPurId" resultType="String">
	select state from purchaselist where purId = #{purId}
</select>

<update id="userCheckDelivery">
	update purchaselist set state='checkedDelivery' where purId = #{purId}
</update> 

<update id="changeUserState">
	update purchaselist set state='writeReview' where purId = #{purId}  
</update>

<update id="reChangeUserState">
	update purchaselist set state='checkedDelivery' where purId = #{purId}  
</update> 

 
</mapper> 
<!-- 
<select id="listProduct" resultType="com.spring.webProject.dto.ProductDto">
	select * from product where pCategory = #{param1}
</select>

<select id="getProduct" resultType="com.spring.webProject.dto.ProductDto">
	select * from product where pId = #{param1}
</select>

<select id="getBookmarkList" resultType="String">
	select uInterestedList from user where uId = #{uId}
</select>

<update id="addBookmark">
	update user set uInterestedList=#{pIdAdd} where uId = #{uId}
</update> 

-->